<!DOCTYPE html>
<html lang="en" style="width:100wh;">

<head>
    <meta charset="UTF-8">
    <title>GBG Programmer</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- lightly modified from https://github.com/dbuezas/arduino-web-uploader -->
    <script src="./arduino-web-uploader.js"></script>

    <script src="./qrcode.min.js"></script>

    <script src="./cryptojs.js"></script>

    <script src="./esptool-js.js"></script>

    <script src="./script.js"></script> <!-- for the Upload Program section -->

</head>

<body style="background-color:lightgrey; width:100wh; overflow-wrap: break-word; margin:0; border:0; padding:0;">

    <main>

        <div id="pointer-arrow"
            style='position: absolute; font-size: 60px; color: magenta; text-align: right; right:40%; top:25px;'
            onclick='document.getElementById("pointer-arrow").hidden=true;'>
            <span style="font-size: 3rem;">start here</span>&#129094
        </div>

        <div id="main" style="width:60%">
            <h2> <a target="_blank" rel="noopener noreferrer"
                    href="https://gobabygocarswithjoysticks.github.io/index/">GBG
                    joystick car</a> programming and configuring website. </h2>
            <p> For any questions about how to use this website, or other feedback,<br>please post <a target="_blank"
                    rel="noopener noreferrer"
                    href="https://github.com/gobabygocarswithjoysticks/programmer/discussions/categories/support">
                    here</a>
                or email <a href="mailto: gobabygocarswithjoysticks@gmail.com">gobabygocarswithjoysticks@gmail.com</a>.
            </p>

            <noscript> <mark> Your browser is not running a script that is required for this website to function.
                    Please
                    enable javascript or try a different browser. </mark> </noscript>
            <mark class="serial-alert"> </mark>
            <div id="options-buttons">
                <br>
                <button id="first-time-program-button" onclick='
                        document.getElementById("hcbp-start").style.outline = "7px solid magenta"; document.getElementById("pointer-arrow").hidden=true;
                        showFirstTime();'>I want to upload code to a new car.
                </button>
                <br><br>
                <button id="config-button" onclick='document.getElementById("hcbs-plug").style.outline = "7px solid magenta"; document.getElementById("pointer-arrow").hidden=true;
                    showConfigButton();'>I want to change the settings of my car.
                </button>
                <br><br>
                <button id="everything-button"
                    onclick='showEverythingButton();document.getElementById("pointer-arrow").hidden=true;'>
                    Show me all the options at once.
                </button>
                <br>
                <br>
            </div>
            <mark id="eepromFailureMessageSpace" hidden></mark>
            <hr>
            <div id="upload-program">
                <h2> Upload Program </h2>
                <mark id="no-config-alert"> </mark>
                <div id="upload-controls-div">
                    <div id="program-selector-container">
                        <label for="program-selector">Select program to upload:</label>
                        <select name="program-selector" id="program-selector"
                            onchange="updateBoardOptionsSelector();"></select>
                    </div>
                    <br>
                    <div id="board-selector-container">
                        <label for="board-selector">Select your board:</label>
                        <select name="board-selector" id="board-selector" onchange="getCode();"></select>
                    </div>
                    <br>
                    <span id="upload-warning-span">
                    </span>
                    <button id="upload-button" class="arduinoUploader" AWU="true"
                        onclick='closeSerial(); document.getElementById("pointer-arrow").hidden = true;'>
                        Upload! [<span class="upload-progress" id="upload-progress">Ready</span>]
                    </button>
                    <span id="upload-info-under-button" class="upload-info"></span>
                </div>
                <p>
                <details>
                    <summary>
                        Advanced settings
                    </summary>
                    <ol>
                        <li>These options are only useful to people developing code for these cars.</li>
                        <li id="source-name-display">
                        </li>
                        <li id="source-hex-display"> hex file:
                        </li>
                        <li>
                            Get car code from main branch instead of from most recent release:
                            <input type="checkbox" id="upload-main-checkbox" onclick="updateUpload()"></input>
                        </li>
                    </ol>
                </details>
                </p>

                <hr>
            </div>
            <div id="connect-to-car">
                <h2>Connect to Car (to change settings)</h2>
                <button id="serial-connect-button"
                    onclick='document.getElementById("serial-connect-button").style.border = "";
                connectToSerial(); cbdone("hcbs-plug");cbhighlight("hcbs-connect"); cblightoff("hcbp-upload-done");cbchk("hcbp-upload-done");cbdis("hcbp-upload-done");document.getElementById("pointer-arrow").hidden=true;'>connect</button>
                <button id="serial-disconnect-button"
                    onclick='document.getElementById("serial-disconnect-button").style.border=""; closeSerial();'>disconnect
                </button>
                <label for="esp32-serial-baud" style='margin-left:25px; font-size: small;'> esp32</label>
                <input type="checkbox" id="esp32-serial-baud">
                <div id="serial-connected-short"></div>
                <hr>
            </div>
            <div id="configure-car">
                <h2>Calibrate and Configure Your Car</h2>
                <div id="joystick-not-centered-message" hidden>
                    <mark>The joystick doesn't appear to be centered.
                        <br>
                        Please center the joystick, and if this message doesn't go away, please calibrate the joystick
                        and make sure you chose the correct pins for the joystick.
                        <br>
                        As a safety measure, the car won't drive until the joystick is centered.
                        <br>
                        Remote Control over wifi or with an RC receiver will not work until the joystick is centered.
                    </mark>
                    <br>
                </div>
                <div id="cal-con-first-look-message">Connect to your car to see settings here.<br><br></div>
                <div id="car-telem-container" style="width:100%; display: flex; flex-wrap: wrap;">
                    <div style="text-align: center">
                        <br>
                        <span onclick='infoButtonHelper("Joystick Input");'>
                            <b><span class="liveVal-input-mode">Joystick</span></b> Input &#x1F6C8</span>
                        <br>
                        <canvas id="joystick-input-canvas" width="220" height="220">
                            <div>Error displaying canvas! Try a different browser?</div>
                        </canvas>
                        <br>
                        <span class="liveVal-button-status"></span>
                        <br>
                    </div>
                    <div style="text-align: center">
                        <br>
                        <span onclick='infoButtonHelper("Scaled Speed Target");'>Scaled Speed Target &#x1F6C8</span>
                        <br>
                        <canvas id="scaled-input-canvas" width="220" height="220">
                            <div>Error displaying canvas! Try a different browser?</div>
                        </canvas>
                    </div>
                    <div style="text-align: center">
                        <br>
                        <span onclick='infoButtonHelper("Smoothed Speed to Drive");'>
                            Smoothed Speed to Drive &#x1F6C8</span>
                        <br>
                        <canvas id="smoothed-input-canvas" width="220" height="220">
                            <div>Error displaying canvas! Try a different browser?</div>
                        </canvas>
                    </div>
                    <div style="text-align: center">
                        <br>
                        <span onclick='infoButtonHelper("Motor Signals");'>
                            Motor Signals &#x1F6C8 :</span> <b><span class="liveVal-movementAllowed">status
                                loading</span></b>
                        <br>
                        <button id="motors-on-off-button"></button>
                        <br>
                        <canvas id="motor-signal-canvas" width="220" height="220">
                            <div>Error displaying canvas! Try a different browser?</div>
                        </canvas>
                    </div>
                </div>
                <br>
                <div id="pin-conflicts-message" style="background-color: yellow;" hidden>
                    Warning! You have assigned more than one function to a pin.
                    Recheck the settings highlighted in yellow.
                    <button onclick="document.querySelectorAll('.car-setting-row').forEach(el => el.hidden = true);
                        checkForPinConflicts();">show only the conflicts</button>
                    <button onclick="showAllSettings(true)">show all settings</button>
                </div>
                <button id="save-settings-button" style="font-size: 24px;" onclick='sendStringSerial("SAVE,",false)'>
                    Save Changes
                </button>
                <span id="save-settings-button-label"></span>
                <br>
                <button onclick='exportSettings();'>
                    download a file containing a backup of the current settings
                </button>
                <br>
                <div id="restore-settings-div">
                    <button onclick='restoreSettings();'>
                        restore backed up settings from a file
                    </button> <span id="restore-settings-msg-div"></span>
                    <input id="restore-settings-input" hidden="true" type="file" accept=".txt"
                        onchange='restoreSettingsGotFile(this.files);' />
                </div>
                <div id="settings-library-div">
                    <a target="_blank" rel="noopener noreferrer"
                        href="https://github.com/gobabygocarswithjoysticks/car-config-library">Library of settings</a>
                    <select id="settings-library-selector" onchange="getLibrary();">
                    </select>
                    <button onclick='restoreWebSettings();'>
                        pull selection from settings library
                    </button>
                    <br>
                    <span id="settings-library-description-div"></span>
                </div>

                <div id="wifi-info-div" hidden>
                    <br>
                    <br>
                    The car you are connected to has a webpage for wirelessly controlling it.
                    <br>
                    <details open>
                        <summary>
                            First, connect to the car's wifi network named <span id="wifi-ssid-span"></span> with the
                            password <span id="wifi-password-span"></span> or scan this QR code to easily connect to
                            the network:
                        </summary>
                        <div id="wifi-network-qr-span" style="margin:1em;"></div>
                    </details>
                    <details open>
                        <summary>
                            Then, open a web browser and go to <a target="_blank" rel="noopener noreferrer"
                                href="http://10.0.0.1">http://10.0.0.1</a> or scan this QR code:
                        </summary>
                        <div id="qrcode-car-site" style="margin:1em;"></div>
                    </details>
                    To make it easy to connect to the car in the future, save and print the QR codes.
                </div>

                <br><br>

                <br><button onclick='showPinSettings();document.getElementById("pointer-arrow").hidden=true;'>choose
                    pins</button>
                <br><button
                    onclick='showJoystickSettings();cancelFollowTheDot(); document.getElementById("pointer-arrow").hidden=true; showSwapPinsInSettingsHeader();'>
                    calibrate joystick the hard way
                </button>
                <button onclick='document.getElementById("pointer-arrow").hidden=true;followTheDot();'>
                    calibrate joystick the easy way</button>
                <br><button onclick='document.getElementById("pointer-arrow").hidden=true;showSpeedSettings();'>change
                    speed and accel</button>
                <br><button onclick='document.getElementById("pointer-arrow").hidden=true;showAllSettings(true);'>show
                    all</button>
                <br><br>
                <div id="settings-header">

                </div>
                <div>
                    <style>
                        table {
                            border-collapse: collapse;
                        }

                        table tr {
                            border-bottom: 2px solid dimgrey;
                            border-top: 2px solid dimgrey;
                        }
                    </style>
                    <table id="car-settings" style="width:99%; border: 1px solid black; border-collapse: collapse;">
                        <!-- settings received from the car will show up here. settings table-->
                    </table>
                </div>

                <br>
                <p>
                <details>
                    <summary>
                        Advanced settings
                    </summary>
                    <button id="read-back-settings-button"
                        onclick='settings_received=false;sendStringSerial("SETTINGS,",false);'>read back
                        settings in RAM</button>
                    <button id="revert-settings-button" ;
                        onclick='settings_received=false; sendStringSerial("REVERT,",false);'>revert to
                        default</button>
                    <button id="reboot-arduino-button"
                        onclick='sendStringSerial("REBOOT,",false); settings_received=false; document.getElementById("save-settings-button-label").innerHTML = ""; document.getElementById("save-settings-button-label-2").innerHTML = "";'>reboot
                        arduino, revert to saved settings</button>
                    <button onclick='showAllSettingsForReal()'>show all settings, even inactive ones</button>
                    <div id="settings-advanced-settings-info">no extra info loaded yet</div>
                    <button onclick='document.getElementById("serialMonitorBox").hidden=false'>
                        show serial monitor</button>
                    <button onclick='document.getElementById("serialMonitorBox").hidden=true'>
                        hide serial monitor</button>
                    <button onclick='downloadFile(serialMonitorString,"gbg serial monitor log.txt");'>
                        download data from serial monitor</button>
                    <button onclick='serialMonitorString=""'>
                        clear serial monitor log</button>
                    <div id="serialMonitorBox" hidden=true style="height:400px;overflow:auto;">
                        no data received yet
                    </div>
                </details>
                </p>
                <hr>
            </div>
            <br>
            <br>
            <footer style="text-align:center">
                <strong>
                    The source code for this website is on Github <a target="_blank" rel="noopener noreferrer"
                        href="https://github.com/gobabygocarswithjoysticks/programmer">here</a>.
                </strong>
                <br>

                <br>
                This website uses <a target="_blank" rel="noopener noreferrer"
                    href="https://github.com/dbuezas/arduino-web-uploader">arduino-web-uploader</a>
                by David Buezas for uploading code to cars that use Arduino Nano and Arduino Uno boards.
                <br><br>
                This website uses <a target="_blank" rel="noopener noreferrer"
                    href="https://github.com/davidshimjs/qrcodejs">qrcodejs</a>
                by davidshimjs.
                <br><br>
                This website uses <a target="_blank" rel="noopener noreferrer"
                    href="https://github.com/espressif/esptool-js">esptool-js</a>
                by Espressif Systems for uploading code to cars that use ESP32 boards.
            </footer>
        </div> <!-- // end of main div -->

        <div id="help-open" style="position: fixed; right:0; top:0vh;" hidden="true">
            <button
                onclick='document.getElementById("help").hidden=false;  document.getElementById("help-open").hidden=true; document.getElementById("main").style.width="60%"'>
                <h2> &#10067</h2>
            </button>
        </div>



        <div id="help"
            style="width:40%; height:100vh; position:fixed; right:0; top:0; background-color:whitesmoke; overflow-y:auto; padding-left:1%; padding-right:1%; padding-top:4px;padding-bottom:4px; box-sizing:border-box">

            <p id="help-index">

                <button
                    onclick='document.getElementById("pointer-arrow").hidden=true; document.getElementById("help").hidden=true; document.getElementById("help-open").hidden=false; document.getElementById("main").style.width="100%"'
                    style="position:fixed; right: 40%; top:0; text-align: right; font-size:2em; border-top-left-radius: 0.2em; border-bottom-left-radius: 0.2em; border-width: 0;">
                    &#187
                    <!-- //help close -->
                </button>


                <br>
                <button id="speed-adjust-help-button"
                    onclick='document.getElementById("hcbs-plug").style.outline = "7px solid magenta";
                    showConfigButton(); speedAdjustHelp=true; showSpeedSettings();document.getElementById("pointer-arrow").hidden=true;'>
                    I want to change the speed of my car.
                </button>
                <br><br>
                <button
                    onclick='document.getElementById("hcbs-plug").style.outline = "7px solid magenta";
                    showConfigButton();     document.getElementById("connect-to-car").scrollIntoView();document.getElementById("pointer-arrow").hidden=true;'>
                    I want to change the settings of my car.
                </button>
                <br>
                <br>
                <br>
                <button onclick='
                document.getElementById("hcbp-start").style.outline = "7px solid magenta";document.getElementById("pointer-arrow").hidden=true;
                showFirstTime();'>
                    I want to upload code to a new car.
                </button>

            </p>
            <hr>
            <hr>
            <hr>

            <div id="help-upload-container">
                <style>
                    li {
                        margin-top: 5px;
                    }
                </style>
                <h2 id="help-upload">
                    Programming the Car
                </h2>
                <mark class="serial-alert"> </mark>
                <ol>
                    <li>
                        <label for="hcbp-start">
                            Congratulations on finishing the
                            <a target="_blank" rel="noopener noreferrer"
                                href="https://gobabygocarswithjoysticks.github.io/index/">
                                hardware modifications</a>
                            of your car!
                            <br><br>
                            <b>
                                Please check the box below every step as you complete it
                                so that the website can guide you through the process of programming the Arduino
                                in your car. (Clicking the text of the step is another way to check the the box).
                            </b>
                            <br>
                        </label>
                        <input type="checkbox" class="help-checkbox" id="hcbp-start"
                            onchange='cbdone("hcbp-start","hcbp-plug");document.getElementById("pointer-arrow").hidden=true;' />
                    </li>
                    <li>
                        <label for="hcbp-plug">
                            Ensure the car is turned off (all lights in the car should be off), then
                            unscrew and remove the seat (the Arduino is under the seat), then plug the Arduino into your
                            computer with a usb cable.
                            <details>
                                <summary>
                                    <b><i>Show me how</i></b>
                                </summary>
                                <table>
                                    <tr>
                                        <td>
                                            <img src="./pics/power-off.JPG" alt="power switch turned off">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/remove-seat.JPG" alt="unscrew and remove the seat">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/usb-align.JPG" alt="align the usb cable with the Arduino">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/usb-plug.JPG" alt="plug the usb cable into the Arduino">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/usb-computer-plug.jpg"
                                                alt="plug the usb cable into your computer">
                                        </td>
                                    </tr>
                                </table>
                            </details>
                            <br>
                            If you smell or see smoke when you plug the car in, unplug it immediately and check for
                            short circuits in your car's wiring.
                        </label>
                        <br>
                        <input type="checkbox" class="help-checkbox" id="hcbp-plug"
                            onchange='showFirstTime(); cbdone("hcbp-plug","hcbp-upload");
                                 document.getElementById("program-selector-container").style.outline = "2px solid LimeGreen";
                                 document.getElementById("hcbp-default-selection-text").style.outline = "2px solid LimeGreen";
                                 document.getElementById("board-selector-container").style.outline = "2px solid SlateBlue";
                                 document.getElementById("hcbp-board-selection-text").style.outline = "2px solid SlateBlue";' disabled />
                    </li>
                    <li>
                        <label for="hcbp-upload">
                            <span id="hcbp-default-selection-text">
                                The selector for what program to upload should be left on "gbg_program".
                            </span><br><br>
                            <span id="hcbp-board-selection-text">
                                &#x2022; The selector for what type of Arduino board is in your car can be left on
                                "old nano" if you have a less expensive Arduino Nano clone (old bootloader).
                                <br>
                                &#x2022; The selector should be changed to say "new nano or uno" if you bought an
                                official Arduino Nano or Uno board.
                                <br>
                                &#x2022; The selector should be changed to say "rpi pico", "rpi pico W", "rpi pico 2",
                                or "rpi pico 2 W" if you
                                are using a Raspberry Pi Pico board.
                                <br>
                                &#x2022; The selector should be changed to say "ESP32" if you
                                are using an ESP32. The "esp32" checkbox that you will later see next to the connect
                                button should automatically check itself.
                            </span>
                            <br>
                            <br>
                            <span id="hcbp-upload-ahead-of-time-text">When you click the checkbox below, a box will pop
                                up, which you will use in the next step to upload the code.</span>
                            <br>
                        </label>
                        <input type="checkbox" class="help-checkbox" id="hcbp-upload" disabled onchange='cbdone("hcbp-upload"); cbhighlight("hcbp-uploading"); 
                        document.getElementById("upload-button").click();
                        document.getElementById("hcbp-uploading").scrollIntoView({ block: "end" });
                        document.getElementById("program-selector-container").style.outline = "0px";
                        document.getElementById("hcbp-default-selection-text").style.outline = "0px";
                        document.getElementById("board-selector-container").style.outline = "0px";
                        document.getElementById("hcbp-board-selection-text").style.outline = "0px";' disabled />
                    </li>
                    <li>
                        <label for="hcbp-uploading">
                            <span id="uploading-step-4">
                                In the box that popped up, click on the car&#39;s serial port in the list (to find the
                                car&#39;s port you can unplug and replug the USB cable and whichever option goes away
                                and comes back is the car). Then, click the "connect" button of the box. <br><br> If
                                there is an error with uploading, you might need to follow instructions that will appear
                                below this paragraph to select the car&#39;s port again and try uploading again.
                            </span>
                            <br><br>
                            <div id="upload-connect-comment"></div>
                            <div class="upload-info" id="hcbp-upload-info"></div>
                        </label>
                        <input type="checkbox" class="help-checkbox" id="hcbp-uploading" disabled />
                    </li>
                    <li>
                        <label for="hcbp-upload-done">
                            The code has now been uploaded, but that process causes the car to disconnect. So, the
                            next
                            step is to connect to the car again in order to customize its settings. You will
                            need to select the car's port for a second time, just like in the step above. Check the
                            box
                            below to continue.
                        </label>
                        <br> <input type="checkbox" class="help-checkbox" id="hcbp-upload-done" disabled
                            onchange='cblightoff("hcbs-plug"); cbdis("hcbs-plug"); cbchk("hcbs-plug"); cbdone("hcbp-upload-done","hcbs-connect"); document.getElementById("hcbs-connect").scrollIntoView({ block: "end" }); document.getElementById("help-settings-plug-label").style.color="lightgrey"; connectToSerial()' />
                    </li>
                </ol>
            </div><!-- upload section -->
            <hr>
            <div id="help-settings-container" style="padding-top:4px;padding-bottom:4px;">
                <h2 id="help-settings">
                    Settings
                </h2>
                <mark class="serial-alert"> </mark>

                <ol>
                    <li>
                        <label id="help-settings-plug-label" for="hcbs-plug">
                            Ensure the car is turned off (all lights in the car should be off), then
                            unscrew and remove the seat (the Arduino is under the seat), then plug the Arduino into your
                            computer with a usb cable. <br>
                            <details>
                                <summary>
                                    <b><i>Show me how</i></b>
                                </summary>
                                <table>
                                    <tr>
                                        <td>
                                            <img src="./pics/power-off.JPG" alt="power switch turned off">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/remove-seat.JPG" alt="unscrew and remove the seat">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/usb-align.JPG" alt="align the usb cable with the Arduino">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/usb-plug.JPG" alt="plug the usb cable into the Arduino">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img src="./pics/usb-computer-plug.jpg"
                                                alt="plug the usb cable into your computer">
                                        </td>
                                    </tr>
                                </table>

                            </details>
                            <br>

                            If you smell or see smoke when you plug the car in, unplug it immediately and check for
                            short circuits in your car's wiring.
                            <br>
                            <br>
                            Please check the box below to each step and the website will you guide you through
                            the process of using this website to change the settings of car.
                            <br>
                            <br>
                            The next step will help you connect to your car. A box will pop up.
                            <br>
                            <br>
                            <b>Please check the box below every step (or click the text in the step) as you complete it
                                so that the website can you guide you through the process of programming the Arduino in
                                your car.
                            </b>
                        </label>
                        <br>
                        <input type="checkbox" class="help-checkbox" id="hcbs-plug" onclick='showConfigButton(); cbdone("hcbs-plug"); cbhighlight("hcbs-connect"); 
                            document.getElementById("hcbs-connect").scrollIntoView({ block: "end" }); document.getElementById("pointer-arrow").hidden=true;
                            connectToSerial();' />
                    </li>

                    <li>
                        <label for="hcbs-connect">
                            In the box that popped up, choose the
                            car's serial port (if you don't know which port is your car, you can unplug and replug
                            the USB cable and whichever
                            option goes away and comes back is the car).
                            <p id="serial-connected-indicator">
                            </p>
                        </label>
                        <input type="checkbox" class="help-checkbox" id="hcbs-connect" disabled />
                    </li>

                    <li>
                        <span id="hcbs-setting-index">
                            <div id="hcbs-setting-index-title">
                                What settings do you want to change? If you are programming a new car, then make sure to
                                calibrate the joystick.
                                <br><button onclick="showPinSettings()">choose pins</button>
                                <br><button
                                    onclick='cancelFollowTheDot(); showJoystickSettings(); showSwapPinsInSettingsHeader();'>
                                    calibrate joystick the hard way
                                </button>
                                <br><button onclick="followTheDot()">calibrate joystick the easy way</button>
                                <br><button onclick="showSpeedSettings()">change speed and accel</button>
                                <br><button onclick="showAllSettings(true)">show all</button>
                                <br><br><br><br><br>
                            </div>
                            <button id="save-settings-button-2" style="font-size: 24px;"
                                onclick='sendStringSerial("SAVE,",false)'>
                                Save Changes
                            </button>
                            <span id="save-settings-button-label-2"></span>
                        </span>
                    </li>
                </ol>
            </div>

            <hr>

            <div>
                <h3>
                    Info about settings:
                </h3>
                <table style="width:300px; table-layout: fixed; width: 100%;">
                    <tr id="help--CONTROL_RIGHT">
                        <td><b>control right: </b> </td>
                        <td>
                            The value (between 0 and 1023) returned from the joystick when it is all the way to the
                            right. Check the setting for pin "joy x pin" if you don't see a clear signal when you
                            move the joystick.
                        </td>
                    </tr>
                    <tr id="help--CONTROL_CENTER_X">
                        <td><b>control center x: </b> </td>
                        <td>
                            The value (between 0 and 1023) returned from the joystick's x axis when it is centered.
                        </td>
                    </tr>
                    <tr id="help--CONTROL_LEFT">
                        <td><b>control left: </b> </td>
                        <td>
                            The value (between 0 and 1023) returned from the joystick when it is all the way to the
                            left. Check the setting for pin "joy x pin" if you don't see a clear signal when you
                            move the joystick.
                        </td>
                    </tr>
                    <tr id="help--X_DEADZONE">
                        <td><b>x deadzone: </b> </td>
                        <td>
                            How big of a zone near the center of the x axis should joystick movement be ignored in?
                            Try around
                            15 to start with. The car won't start if the joystick isn't in the deadzone.
                        </td>
                    </tr>
                    <tr id="help--CONTROL_UP">
                        <td><b>control up: </b> </td>
                        <td>
                            The value (between 0 and 1023) returned from the joystick when it is all the way
                            forwards. Check the setting for pin "joy y pin" if you don't see a clear signal when you
                            move the joystick.
                        </td>
                    </tr>
                    <tr id="help--CONTROL_CENTER_Y">
                        <td><b>control center y: </b> </td>
                        <td>
                            The value (between 0 and 1023) returned from the joystick's y axis when it is centered.
                        </td>
                    </tr>
                    <tr id="help--CONTROL_DOWN">
                        <td><b>control down: </b> </td>
                        <td>
                            The value (between 0 and 1023) returned from the joystick when it is all the way
                            backwards. Check the setting for pin "joy y pin" if you don't see a clear signal when
                            you move the joystick.
                        </td>
                    <tr id="help--Y_DEADZONE">
                        <td><b>y deadzone: </b> </td>
                        <td>
                            How big of a zone near the center of the y axis should joystick movement be ignored in?
                            Try around 15 to start with. The car won't start if the joystick isn't in the deadzone.
                        </td>
                    </tr>
                    <tr id="help--ACCELERATION_FORWARD">
                        <td><b>acceleration forward: </b> </td>
                        <td>
                            Rate of increase of speed when the car is moving forward. (fastest forward) / (acceleration
                            forward) =
                            seconds to reach max speed. (Larger number means higher acceleration). You can use the
                            slow/medium/fast buttons to the left to give you a value to start with then adjust from
                            there.
                        </td>
                    </tr>
                    <tr id="help--DECELERATION_FORWARD">
                        <td><b>deceleration forward: </b> </td>
                        <td>
                            Rate of decrease of speed when the car is moving forward. (fastest forward) / (deceleration
                            forward) =
                            seconds to slow to a stop from max speed. (Larger number means higher deceleration). You can
                            use the slow/medium/fast buttons to the left to give you a value to start with then adjust
                            from there.
                        </td>
                    </tr>
                    <tr id="help--ACCELERATION_BACKWARD">
                        <td><b>acceleration backward: </b> </td>
                        <td>
                            Rate of increase of speed when the car is moving backward. (fastest backwards) /
                            (acceleration backward) =
                            seconds to reach max speed. (Larger number means higher acceleration). You can use the
                            slow/medium/fast buttons to the left to give you a value to start with then adjust from
                            there.
                        </td>
                    </tr>
                    <tr id="help--DECELERATION_BACKWARD">
                        <td><b>deceleration backward: </b> </td>
                        <td>
                            Rate of decrease of speed when the car is moving backward. (fastest backwards) /
                            (deceleration backward) =
                            seconds to slow to a stop from max speed. (Larger number means higher deceleration). You can
                            use the slow/medium/fast
                            buttons to the left to give you a value to start with then adjust from there.
                        </td>
                    </tr>
                    <tr id="help--ACCELERATION_TURNING">
                        <td><b>acceleration turning: </b> </td>
                        <td>
                            Rate of increase of rotation speed. (turn speed) / (acceleration turning) = seconds to
                            reach
                            max speed. (Larger number means higher acceleration). You can use the slow/medium/fast
                            buttons to the left to give you a value to start with then adjust from there.
                        </td>
                    </tr>
                    <tr id="help--DECELERATION_TURNING">
                        <td><b>deceleration turning: </b> </td>
                        <td>
                            Rate of decrease of rotation speed. (turn speed) / (deceleration turning) =
                            seconds to slow to a stop from max speed. (Larger number means higher deceleration). You can
                            use the slow/medium/fast buttons to the left to give you a value to start with then adjust
                            from there.
                        </td>
                    </tr>
                    <tr id="help--FASTEST_FORWARD">
                        <td><b>fastest forward: </b> </td>
                        <td>
                            Maximum forward speed (between 0.0 and 1.0). While associated with speed, this setting is
                            actually a limit on the power/torque of the motors so if you want to drive on a lawn a
                            higher value might be needed.
                        </td>
                    </tr>
                    <tr id="help--FASTEST_BACKWARD">
                        <td><b>fastest backward: </b> </td>
                        <td>
                            Maximum backward speed (between 0.0 and 1.0). While associated with speed, this setting is
                            actually a limit on the power/torque of the motors so if you want to drive on a lawn a
                            higher value might be needed.
                        </td>
                    </tr>
                    <tr id="help--FASTEST_BACKWARD">
                        <td><b>fastest backward: </b> </td>
                        <td>
                            Maximum backward speed (between 0.0 and 1.0). While associated with speed, this setting is
                            actually a limit on the power/torque of the motors so if you want to drive on a lawn a
                            higher value might be needed.
                        </td>
                    </tr>
                    <tr id="help--TURN_SPEED">
                        <td><b>turn speed: </b> </td>
                        <td>
                            Maximum turning (spinning) speed (between 0.0 and 1.0). While associated with speed, this
                            setting is
                            actually a limit on the power/torque of the motors so if you want to drive on a lawn a
                            higher value might be needed.
                        </td>
                    </tr>
                    <tr id="help--SCALE_TURNING_WHEN_MOVING">
                        <td><b>scale turning when moving: </b> </td>
                        <td>
                            This setting changes how tightly the car turns when the joystick is pushed to a corner, try
                            0.5 to start. (Higher values mean tighter turns. It's recommended to stay within 0.0 and
                            1.0). </td>
                    </tr>
                    <tr id="help--REVERSE_TURN_IN_REVERSE">
                        <td><b>reverse turn in reverse: </b> </td>
                        <td>Changes how the car drives in reverse (flips rotation direction if the car is moving
                            backwards). If checked: car drives towards direction joystick
                            pointed. If unchecked: car spins in direction joystick pointed.
                        </td>
                    </tr>
                    <tr id="help--LEFT_MOTOR_CENTER">
                        <td><b>left motor center: </b> </td>
                        <td>
                            What ESC signal makes the left motor stop? usually 1500
                        </td>
                    </tr>
                    <tr id="help--LEFT_MOTOR_SLOW">
                        <td><b>left motor slow: </b> </td>
                        <td>
                            Center ± what makes the left motor start to turn? Can be negative if the motor is wired
                            backwards. Try 25.
                        </td>
                    </tr>
                    <tr id="help--LEFT_MOTOR_FAST">
                        <td><b>left motor fast: </b> </td>
                        <td>
                            Center ± what makes the left motor run at full speed? Can be negative if the motor is wired
                            backwards. Usually 500.
                        </td>
                    </tr>
                    <tr id="help--RIGHT_MOTOR_CENTER">
                        <td><b>right motor center: </b> </td>
                        <td>
                            What ESC signal makes the right motor stop? usually 1500
                        </td>
                    </tr>
                    <tr id="help--RIGHT_MOTOR_SLOW">
                        <td><b>right motor slow: </b> </td>
                        <td>
                            Center ± what makes the right motor start to turn? Can be negative if the motor is wired
                            backwards. Try 25.
                        </td>
                    </tr>
                    <tr id="help--RIGHT_MOTOR_FAST">
                        <td><b>right motor fast: </b> </td>
                        <td>
                            Center ± what makes the right motor run at full speed? Can be negative if the motor is wired
                            backwards. Usually 500.
                        </td>
                    </tr>
                    <tr id="help--USE_SPEED_KNOB">
                        <td><b>use speed knob: </b> </td>
                        <td>
                            Check the box if an optional knob for easily adjusting the max speed been added to your car.
                        </td>
                    </tr>
                    <tr id="help--SPEED_KNOB_SLOW_VAL">
                        <td><b>speed knob slow val: </b> </td>
                        <td>
                            (Hidden unless "use speed knob" is enabled.) This setting should be the analogRead value
                            when the knob is turned towards the slowest setting. (check SPEED_KNOB_PIN if not a clear
                            signal)
                        </td>
                    </tr>
                    <tr id="help--SPEED_KNOB_FAST_VAL">
                        <td><b>speed knob fast val: </b> </td>
                        <td>
                            (Hidden unless "use speed knob" is enabled.) This setting should be the analogRead value
                            when the knob is turned towards the fastest setting. (check SPEED_KNOB_PIN if not a clear
                            signal)
                        </td>
                    </tr>
                    <tr id="help--SCALE_ACCEL_WITH_SPEED">
                        <td><b>scale accel with speed: </b> </td>
                        <td>
                            (Hidden unless "use speed knob" is enabled.) Check box if using a speed knob and you want to
                            keep time to max speed constant instead of
                            acceleration being constant. If checked: (1/accel)=time to reach max speed setting. If
                            unchecked: (1/accel)=time to reach speed of 1.0 even if the car is limited from reaching a
                            speed of 1.
                        </td>
                    </tr>
                    <tr id="help--SPEED_KNOB_PIN">
                        <td><b>speed knob pin: </b> </td>
                        <td>
                            (Hidden unless "use speed knob" is enabled.) Pin connected to optional potentiometer for
                            adjusting max speed.
                        </td>
                    </tr>
                    <tr id="help--JOY_X_PIN">
                        <td><b>joy x pin: </b> </td>
                        <td>
                            What analog pin is the X (left-right) axis of the joystick connected to?
                        </td>
                    </tr>
                    <tr id="help--JOY_Y_PIN">
                        <td><b>joy y pin: </b> </td>
                        <td>
                            What analog pin is the Y (forwards-backwards) axis of the joystick connected to?
                        </td>
                    </tr>
                    <tr id="help--LEFT_MOTOR_CONTROLLER_PIN">
                        <td><b>left motor controller pin: </b> </td>
                        <td>
                            What Arduino pin is the left motor controller connected to?
                        </td>
                    </tr>
                    <tr id="help--RIGHT_MOTOR_CONTROLLER_PIN">
                        <td><b>right motor controller pin: </b> </td>
                        <td>
                            What Arduino pin is the right motor controller connected to?
                        </td>
                    </tr>
                    <tr id="help--SWAP_MOTORS">
                        <td><b>swap motors: </b> </td>
                        <td>
                            For the GBG-PCB, check this box to swap the motors left/right. For a standard car, this
                            setting will be hidden and the motors can be swapped by changing the motor controller pins.
                        </td>
                    </tr>
                    <tr id="help--ENABLE_STARTUP_PULSE">
                        <td><b>enable startup pulse: </b> </td>
                        <td>
                            If the small movement that the car uses to indicate it is ready to drive is bothering the
                            driver, then you can turn it off by unchecking this setting.
                        </td>
                    </tr>
                    <tr id="help--LEFT_MOTOR_PULSE">
                        <td><b>left motor pulse: </b> </td>
                        <td>
                            What signal (inverted if LEFT_MOTOR_SLOW is negative) and added to LEFT_MOTOR_CENTER makes
                            the left motor move enough to cause a gentle movement that can be used to indicate the car
                            is ready to drive.
                        </td>
                    </tr>
                    <tr id="help--RIGHT_MOTOR_PULSE">
                        <td><b>right motor pulse: </b> </td>
                        <td>
                            What signal (inverted if RIGHT_MOTOR_SLOW is negative) and added to RIGHT_MOTOR_CENTER makes
                            the right motor move enough to cause a gentle movement that can be used to indicate the car
                            is ready to drive.
                        </td>
                    </tr>
                    <tr id="help--START_MOTOR_PULSE_TIME">
                        <td><b>start motor pulse time: </b> </td>
                        <td>
                            How many thousandths of a second are the motors pulsed to indicate that the car is ready to
                            drive.
                        </td>
                    </tr>
                    <tr id="help--JOY_CALIB_COUNT">
                        <td><b>joy calib count: </b> </td>
                        <td>
                            How many centered joystick readings need to be taken in a row before the joystick is
                            considered centered and ok? One reading takes a bit under 2 thousandths of a second.
                            <br>
                            Set to -1 to turn off joystick center check.
                        </td>
                    </tr>
                    <tr id="help--ENABLE_BUTTON_CTRL">
                        <td><b>enable button ctrl: </b> </td>
                        <td>
                            The car can be controlled with buttons instead of a joystick.
                            <br>
                            When in button mode, some text indicating the state of each button appears. It looks like
                            "buttons: 0001xx" where 0 means button off (open circuit), 1 means button pressed, and x
                            means the button is not used because of the value of "num drive buttons." Unless
                            "buttons active high" is checked, buttons should connect the pins to ground when pressed.
                        </td>
                    </tr>
                    <tr id="help--USE_BUTTON_MODE_PIN">
                        <td><b>use button mode pin: </b> </td>
                        <td>
                            Use a switch to change between button mode and joystick mode at any time. Turn on "enable
                            button ctrl" to use.
                        </td>
                    </tr>
                    <tr id="help--BUTTON_MODE_PIN">
                        <td><b>button mode pin: </b> </td>
                        <td>
                            What pin is the optional button mode switch wired to? Turn on "use button mode pin" to
                            use.
                        </td>
                    </tr>
                    <tr id="help--BUTTON_MODE_TOGGLE">
                        <td><b>button mode toggle: </b> </td>
                        <td>
                            If checked, activating the button mode pin toggles between joystick mode and button mode.
                            If unchecked, button mode is on while the button mode pin is activated.
                        </td>
                    </tr>
                    <tr id="help--BUTTONS_ACTIVE_HIGH">
                        <td><b>buttons active high: </b> </td>
                        <td>
                            If checked, the buttons (and the button mode pin) are considered pressed when the pin is
                            pulled high. If unchecked (the default), the buttons are considered pressed when the pin is
                            pulled low (connected to ground). The pins all have a pull-up resistor enabled.
                        </td>
                    <tr id="help--NUM_DRIVE_BUTTONS">
                        <td><b>num drive buttons: </b> </td>
                        <td>
                            How many optional buttons are wired to the car? Up to six buttons are supported. Turn on
                            "enable button ctrl" to use.
                        </td>
                    </tr>
                    <tr id="help--Drive Button">
                        <td><b>Drive Buttons: </b> </td>
                        <td>
                            What amount of speed and turning should the car accelerate to when pin is pulled low by a
                            button? If more than one button is pressed, the speeds and turning amounts add together.
                            "pin" can be any digital pin on the Arduino, speed is between -1.0(backwards) and
                            1.0(forwards), and turn is between -1.0(turning left) and 1.0(turning right).
                        </td>
                    </tr>
                    <tr id="help--STEERING_OFF_SWITCH">
                        <td><b>steering off switch: </b> </td>
                        <td>
                            If this option is checked, turning on a switch wired between USE_BUTTON_MODE_PIN and the gnd
                            pin of the Arduino makes the car only drive forwards and back, with steering and turning
                            unavailable. If you want the car to always be unable to turn, set TURN_SPEED to 0.
                        </td>
                    </tr>
                    <tr id="help--STEERING_OFF_SWITCH_PIN">
                        <td><b>steering off switch pin: </b> </td>
                        <td>
                            Pin of the Arduino connected to the switch that turns on and off the steering of the car.
                            See STEERING_OFF_SWITCH above.
                        </td>
                    </tr>
                    <tr id="help--UR">
                        <td><b>use rc: </b> </td>
                        <td>
                            If this option is checked, the car will read servo signals from a remote control receiver so
                            that a remote control can be used to override the controls on the car.
                        </td>
                    </tr>
                    <tr id="help--RSP">
                        <td><b>rc speed pin: </b> </td>
                        <td>
                            Wire this pin to the signal pin of the remote control receiver that outputs a signal from
                            the Y axis of the remote control joystick. 2000 microseconds is forward, 1000 microseconds
                            is backward. There is a deadzone from 1450 to 1550 microseconds.
                        </td>
                    </tr>
                    <tr id="help--RTP">
                        <td><b>rc turn pin: </b> </td>
                        <td>
                            Wire this pin to the signal pin of the remote control receiver that outputs a signal from
                            the X axis of the remote control joystick. 2000 microseconds is right, 1000 microseconds
                            is left. There is a deadzone from 1450 to 1550 microseconds.
                        </td>
                    </tr>
                    <tr id="help--RCP">
                        <td><b>rc control pin: </b> </td>
                        <td>
                            Wire this pin to the signal pin of the remote control receiver that outputs a signal from
                            a switch on the remote control. Over 1600 microseconds turns on the remote override. Under
                            1400 microseconds gives control back to the car.
                        </td>
                    </tr>
                    <tr id="help--RPP">
                        <td><b>rc stop pin: </b> </td>
                        <td>
                            Wire this pin to the signal pin of the remote control receiver that outputs a signal from
                            a switch on the remote control. Over 1600 microseconds stops the car. Under 1400
                            microseconds gives control back to the car.
                        </td>
                    </tr>
                    <tr id="help--NRS">
                        <td><b>rc inactive until connected:</b></td>
                        <td>
                            If this option is checked, the car will be able to move without being connected to the
                            remote control, from when the car is turned on, until the remote control is turned on. Once
                            the remote connects, the car will stop if the remote control signal disconnects. If this
                            option is unchecked, the car will not be able to move when it is first turned on until the
                            remote control is turned on. If this option is checked, the car can be used without a remote
                            control, if this option is unchecked the car can only be used with a remote control
                            connected.
                        </td>
                    </tr>
                    <tr id="help--USS">
                        <td><b>use stop switch: </b> </td>
                        <td>
                            If this option is checked, the car will read a switch that can be used to stop the car.
                        </td>
                    </tr>
                    <tr id="help--SP">
                        <td><b>stop pin: </b> </td>
                        <td>
                            Wire this pin to a switch that can be used to stop the car. Turn on "use stop switch." The
                            pin has a pull up resistor enabled.
                        </td>
                    </tr>
                    <tr id="help--SPH">
                        <td><b>stop pin high: </b> </td>
                        <td>
                            If this option is checked, the car will stop when the stop pin is pulled high. If this
                            option is unchecked, the car will stop when the stop pin is pulled low.
                        </td>
                    </tr>
                    <tr id="help--NSU">
                        <td><b>no stop until start: </b> </td>
                        <td>
                            If this option is unchecked, the car will only go if the stop switch is in the go position.
                            If this option is checked, the car will be able to move even if the stop switch is in the
                            stop position, until the switch is moved to the go position then back to the stop position.
                            Set it unchecked if you have a switch wired to the car. Set it checked if the pin is
                            connected to a receiver for a remote stop switch and you want the car to be able to drive
                            without the remote connected.
                        </td>
                    </tr>
                    <tr id="help--UOB">
                        <td><b>use on off buttons: </b> </td>
                        <td>
                            If this option is checked, the car will read two buttons that can be used to turn the car
                            on and off.
                        </td>
                    </tr>
                    <tr id="help--NB">
                        <td><b>on button pin: </b> </td>
                        <td>
                            Wire this pin to a button that can be used to turn the car on. Turn on "use on off buttons."
                            The pin has a pull up resistor enabled.
                        </td>
                    </tr>
                    <tr id="help--FB">
                        <td><b>off button pin: </b> </td>
                        <td>
                            Wire this pin to a button that can be used to turn the car off. Turn on "use on off
                            buttons."
                            The pin has a pull up resistor enabled.
                        </td>
                    </tr>
                    <tr id="help--BAH">
                        <td><b>on off buttons active high: </b> </td>
                        <td>
                            If this option is checked, the car will consider the on button pressed when the pin is
                            pulled high. If this option is unchecked, the car will consider the on button pressed when
                            the pin is pulled low. Note that both pins have pull up resistors enabled. Turn on "use on
                            off buttons."
                        </td>
                    </tr>

                    <tr id="help--CAR_WIFI_NAME">
                        <td><b>car wifi name: </b> </td>
                        <td>
                            If you are using a microcontroller with wifi, it will create a wifi network named
                            gbgcar[number]. The network name will update on the next reboot of the car. The number will
                            be limited to values between 0 and 99. This number should be unique among cars that will be
                            used near each other to avoid conflicts.
                        </td>
                    </tr>
                    <tr id="help--CAR_WIFI_PASSWORD">
                        <td><b>car wifi password: </b> </td>
                        <td>
                            Use this to make a unique password for the wifi network created by the car. The password is
                            gobabygo[number]. The password will update on the next reboot of the car. The number will be
                            limited to positive integers with 9 or fewer digits.
                        </td>
                    </tr>


                    <tr id="help--Joystick Input">
                        <td><b><span class="liveVal-input-mode">Joystick</span> Input: </b> </td>
                        <td>
                            This box displays the position that the car thinks the joystick is in. Make sure that it
                            matches the joystick on the car and if it doesn't, calibrate the joystick.
                            <br>
                            If "enable button ctrl" is on, then this box will be displaying the input caused by the
                            buttons instead, and the title will change to say "Button Input."
                        </td>
                    </tr>
                    <tr id="help--Scaled Speed Target">
                        <td><b>Scaled Speed Target: </b> </td>
                        <td>
                            This box displays the driving (vertical axis) and turning (horizontal axis) speeds that the
                            car will accelerate up to. You can change the forward, backward, and turning speed settings
                            to change the limits of these speeds. The edges of the box represent speeds of 1, which is
                            the maximum speed.
                        </td>
                    </tr>
                    <tr id="help--Smoothed Speed to Drive">
                        <td><b>Smoothed Speed to Drive: </b> </td>
                        <td>
                            This box displays the driving (vertical axis) and turning (horizontal axis) speeds that the
                            car would drive at, after the acceleration limit is applied. This display can be used to see
                            how long the car will take to accelerate and decelerate.
                        </td>
                    </tr>
                    <tr id="help--Motor Signals">
                        <td><b>Motor Signals: </b> </td>
                        <td>
                            The motors are automatically turned off when the website connects, and will turn back on
                            when the car is rebooted, but you can turn the motors on and off whenever you want while
                            your computer is still connected using the button.
                            This display shows the signals (microseconds of pulse of servo signal) sent to the left and
                            right motors.
                        </td>
                    </tr>
                </table>
            </div>
        </div> <!-- end of settings section -->
        </div> <!-- end of help div -->
    </main>
</body>

</html>